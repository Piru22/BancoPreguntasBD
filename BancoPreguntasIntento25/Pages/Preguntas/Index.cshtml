@page
@model BancoPreguntasIntento25.Pages.Preguntas.IndexModel
@{
    ViewData["Title"] = "Banco de Preguntas";
    ViewData["HideNav"] = true;   // ← barra vacía (sin marca ni links)
}

<div class="container-wide">

    <h1 class="page-title">Banco de Preguntas</h1>

    <div class="toolbar">
        <div class="toolbar-left">
            <!-- tu enlace existente, ahora con estilo btn -->
            <a asp-page="./Create" class="btn btn-primary">➕ Nueva Pregunta</a>

            <!-- tus botones de flujo, respetando rutas -->
            <a asp-page="/Preguntas/Asignaturas" class="btn btn-ghost">📚 Ver asignaturas</a>
            <a asp-page="/Preguntas/VerRespuestas" class="btn btn-ghost">👁️ Ver preguntas</a>
        </div>

        <div class="toolbar-right">
            <!-- tu filtro GET, mismos nombres/valores -->
            <form method="get" style="display:flex; gap:10px; align-items:center;">
                <div class="search">
                    <input type="number"
                           name="Unidad"
                           value="@(Model.Unidad?.ToString() ?? "")"
                           placeholder="Buscar por unidad..." />
                </div>
                <button type="submit" class="btn btn-primary">Filtrar</button>
                <a asp-page="./Index" class="btn btn-ghost">Limpiar</a>
            </form>
        </div>
    </div>

    @if (Model.Unidad.HasValue)
    {
        <div style="margin-bottom:10px; color:var(--muted);">
            Mostrando resultados de la <strong>Unidad @Model.Unidad</strong>.
        </div>
    }

    <table class="table-bank">
        <thead>
            <tr>
                <th>@Html.DisplayNameFor(model => model.ListaPreguntas[0].Texto)</th>
                <th>@Html.DisplayNameFor(model => model.ListaPreguntas[0].RespuestaCorrecta)</th>
                <th>@Html.DisplayNameFor(model => model.ListaPreguntas[0].Asignatura)</th>
                <th>@Html.DisplayNameFor(model => model.ListaPreguntas[0].Unidad)</th>
                <th>@Html.DisplayNameFor(model => model.ListaPreguntas[0].SubUnidad)</th>
                <th style="width:240px;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.ListaPreguntas)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.Texto)</td>
                    <td>@Html.DisplayFor(modelItem => item.RespuestaCorrecta)</td>
                    <td><span class="chip">@Html.DisplayFor(modelItem => item.Asignatura)</span></td>
                    <td><span class="chip">@Html.DisplayFor(modelItem => item.Unidad)</span></td>
                    <td><span class="chip">@Html.DisplayFor(modelItem => item.SubUnidad)</span></td>
                    <td>
                        <div class="actions">
                            <a asp-page="./Edit" asp-route-id="@item.PreguntaId" class="btn btn-ghost">✏️ Editar</a>
                            <a asp-page="./Details" asp-route-id="@item.PreguntaId" class="btn btn-ghost">📄 Detalles</a>
                            <a asp-page="./Delete" asp-route-id="@item.PreguntaId" class="btn btn-danger">🗑 Borrar</a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>

</div>
